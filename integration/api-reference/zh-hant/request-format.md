---
id: request-format
title: 請求參數
sidebar_label: 請求參數
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Link from '@docusaurus/Link';

### HTTP 請求

`POST ../trade/v1/payment`

以下列出常見的支付 API 請求參數。請根據實際使用場景查閱對應的額外參數要求。

---

### 公共支付請求參數

| 參數名稱         | 是否必填             | 類型         | 說明                                                                                                                                               |
|------------------|----------------------|--------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| `txamt`          | 是                   | Int(11)      | 交易金額，以分為單位（例如 100 = 1 元）。建議設為大於 200，以避免風控。|
| `txcurrcd`       | 是                   | String(3)    | 交易幣種，請參考 [幣種列表](./currencies.md)。|
| `pay_type`       | 是                   | String(6)    | 請參考 [支付方式代碼](./paytypes.md) 確認可用的支付方式。|
| `out_trade_no`   | 是                   | String(128)  | 外部交易號／商戶平台交易號：在相同商戶帳戶下，此值對每一筆支付和退款請求必須唯一。|
| `txdtm`          | 是                   | String(20)   | 交易時間，格式為：YYYY-MM-DD hh:mm:ss|
| `auth_code`      | 是<br/>(僅限 CPM 模式) | String(128)  | 消費者錢包條碼／二維碼的授權碼，每個 `auth_code` 僅可使用一次，並在一天內過期。測試時可從支付寶或微信錢包中擷取。|
| `expired_time`   | 否<br/>(僅限 MPM 模式) | String(3)    | 二維碼有效時間（分鐘）。預設為 30 分，最小為 5 分，最大為 120 分。<br/>適用於：<br/>800201, 800101, 801512, 801501, 801107, 801101, 801010, 801510|
| `goods_name`     | 否                   | String(64)   | 商品名稱或描述，不可超過 20 個字元，且不得包含特殊符號。如為中文內容，須使用 UTF-8 編碼。App 支付場景中為必填。|
| `mchid`          | 否                   | String(16)   | 可能提供給商戶也可能不提供。<br/>**若提供 `mchid`，則請求中必須帶上。**<br/>**若未提供，則請勿傳入該欄位。**|
| `udid`           | 否                   | String(40)   | 裝置識別碼，用於內部交易追蹤。|
| `notify_url`     | 否                   | String(256)  | 當交易完成時，系統將以非同步方式通知此 URL。|

---

### 簽名要求
如需產生有效簽名的說明，請參考 [簽名生成方式](./signature-generation.md)。


### 請求說明

:::note
API 回應內容以 JSON 格式返回。我們建議開發者驗證回應 Header 中的簽名，以確保資料完整性。
:::

| 欄位          | 說明                                             |
|---------------|--------------------------------------------------|
| Character     | `UTF-8`                                          |
| Method        | **POST / GET**（依各 API 功能而定）             |
| Content-type  | `application/x-www-form-urlencoded`              |

### API 請求所需的 HTTP Header 參數

| 欄位             | 是否必填 | 說明                                                                                                                                                        |
|------------------|----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `X-QF-APPCODE`   | 是       | QFPay 指派給商戶的 App Code                                                                                                                                 |
| `X-QF-SIGN`      | 是       | 依照上述簽名規則所產生的簽名值                                                                                                                              |
| `X-QF-SIGNTYPE`  | 否       | 簽名所使用的演算法。若使用 SHA256，需傳入 `SHA256`。未指定時預設為 `MD5`。                                                                                |